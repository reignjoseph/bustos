<script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
<div style="width: 16em;">
<div class="navigation_container">
    <aside class="navigation_sidebar">
        <div class="navigation_logo">
            <img src="/static/images/peso_logo.png" alt="PESO Logo">
        </div>
        
        <div class="navigation_admin-header">
            <img src="static/images/admin-images/admin.png" alt="Admin Icon">
            <h2>Admin</h2>
        </div>
        
        <ul class="navigation_nav">
            <li class="active" onclick="showSection('dashboard', this)">
                <img src="static/images/admin-images/dashboard.png" alt="Dashboard Icon"> 
                <span>Dashboard</span>
            </li>
            <li onclick="showSection('employers', this)">
                <img src="static/images/admin-images/employee.png" alt="Employers Icon"> 
                <span>Employers</span>
            </li>
            <li onclick="showSection('jobseekers', this)">
                <img src="static/images/admin-images/jobseeker_search.png" alt="Job Seekers Icon"> 
                <span>Job Seekers</span>
            </li>
            <li onclick="showSection('jobs', this)">
                <img src="static/images/admin-images/find_jobs.png" alt="Jobs Icon"> 
                <span>Jobs</span>
            </li>
            <li onclick="showSection('announcements', this)">
                <img src="static/images/admin-images/announcement.png" alt="Announcement Icon"> 
                <span>Announcement</span>
            </li>
            <li onclick="showSection('notifications', this)">
                <img src="static/images/admin-images/notification.png" alt="Notifications Icon"> 
                <span>Notifications</span>
            </li>
            <li onclick="showSection('reports', this)">
                <img src="static/images/admin-images/reports.png" alt="Reports Icon"> 
                <span>Reports</span>
            </li>
            <li onclick="showSection('registration', this)">
                <img src="static/images/admin-images/registration_control.png" alt="Registration Control Icon"> 
                <span>Registration Control</span>
            </li>
            <li onclick="showSection('ratings', this)">
                <img src="static/images/admin-images/rating.png" alt="Rating Icon"> 
                <span>Rating</span>
            </li>
        </ul>

        <a href="/logout" class="navigation_sign-out">
            Sign Out
            <img src="static/images/logout.png" alt="Sign Out Icon" class="navigation_sign-out-icon">
        </a>
    </aside>
</div>
</div>
<!-- JavaScript to handle section display -->
<script>
    function showSection(section, element) {
        const sections = ['dashboard', 'announcements', 'employers', 'jobs', 'jobseekers', 'notifications', 'ratings', 'registration', 'reports'];
        
        // Hide all sections
        sections.forEach(sec => {
            document.querySelector(`.${sec}`).style.display = 'none';
        });
        
        // Show the selected section
        document.querySelector(`.${section}`).style.display = 'inherit';

        // Remove 'active' class from all nav items
        const navItems = document.querySelectorAll('.navigation_nav li');
        navItems.forEach(item => {
            item.classList.remove('active');
        });

        // Add 'active' class to clicked item
        element.classList.add('active');

        // Trigger PDF generation only when the 'reports' section is clicked
        if (section === 'reports') {
            setTimeout(generatePDF, 7000); // Allow the content to render before generating PDF
        }
    }

    // Optionally: Set the dashboard as the default section on load
    window.onload = function() {
        showSection('dashboard', document.querySelector('.navigation_nav li.active'));
    }
</script>

<script>
function generatePDF() {
    // Get the element to print
    const element = document.querySelector('.mainframe');

    // Check if the element exists and has content
    if (!element || !element.innerHTML.trim()) {
        alert("No content available for PDF generation.");
        return;
    }

    // Options for the PDF with best quality settings
    const options = {
        margin: 0.45,
        filename: 'peso_report.pdf',
        image: { type: 'jpeg', quality: 1 }, // Best quality for images
        html2canvas: { scale: 4 }, // Higher scale for better resolution
        jsPDF: { unit: 'in', format: 'letter', orientation: 'portrait' }
    };

    // Delay PDF generation to ensure chart rendering is done
    setTimeout(() => {
        html2pdf()
            .from(element)
            .set(options)
            .save()
            .catch(err => {
                console.error('Error generating PDF:', err);
                alert('An error occurred while generating the PDF.');
            });
    }, 1000); // Adjust the delay as needed
}
</script>
